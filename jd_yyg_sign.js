/*
活动名称：医药馆签到

cron: 35 9 * * * jd_yyg_sign.js

*/

const $ = new Env('医药馆签到')
var iｉl='jsjiami.com.v7';const lI1III=iii1II;function Iii11l(){const Iiill1=(function(){return[...[iｉl,'rnRjDsDXjiIEkayVmYPi.RcSSoqmnX.vAC7eFuer==','W5CogSo9Cv/dH8onqM7cSYJcJxrIrmohrHVdImk5W5VcMSo6W7TfqZH5j8oflSopWQ43EctdTSoxhSoWW7eiA8o3WP1ZDmkMyLngkG','WP3dPaxcI8kD','WQG0W5/cLSkDW7P8fSk8','WQWIW7NcNmkC','W54RWOS','FwddMSkbxG','lKtcRSo+WQW','566f5yUY5OIR5yQd','WOpcOSkWW5yf','deyat0e/WRtcM8oG','x8krxfaS','W5dcONa','4P+tW7dMNypOGRlMRldNOR7LPQJNKOj+','W7NcUre','mmkDW6HoxHpcJCowWPXnWRDAsGe','WRPaCSk8ea','qEwqGow5KICOWQVcRKVcRu9urG4','W7XMWRxdNSkCdmkcWO3dOH0','W79/uCkshcxcOSojW6njW7dcKh4','W797WRSB','FhVdUmk+tG','WRFcQwhdOCkS','6lAi5yYd5PsY5PAW','W5HqWRW3WPi','vmoKWORcQmoi','zmkrz8k5W4y','FCkTW4tdNW','WO3dVIfuW4WlWPJcOCk8W7u','WRj7WPldNSkrze8','W5RcTeHKla','w8ksrNq','smo/W44Tra','W5OHWO3cUvutW5q','WR5TF8kzfW','pCo3yHy','W7HPWP3cGCk6W5LwnmkLW6qmW5RdVtDrySo+','W59AW7DZW48ErSkve8k9EdhcJLKVjstdRcxdPXhcLf/cUSkFD8oPW5dcJSoyW4FdMfe','W6C3WONcR34aW4RcPq','W5NcLCk7WOW','neFcV8oyWQm','W4JcKCk3WPXzeKNcPSkdWQFcOa','W7NcJmosW5m2','WR4Md8oj','W6DVWQyPWONdJKW','WPBdSGKWBSk+W5FcUWyiW4lcQfaUgGNcTJpdRx/cNCkpWQBcGmkuW5/cUqlcU8kdymkxW5aVW4NdNmkdESoDymkpofLCW7LrW75ed8o2W7eGxG','WQVcSN7dTmkXBcRcOG9qWQtcJCokWQpdTSkMsmkWCxO','nSkRWQe0pq','grpdK8oDWPq','WQtcO34','WQRcQgNdQmk3mMddVG','dEISLEAZLEwMUUI0VuxdG8o5W5K','kWldK8oYWRC','WOTDxJlcHG','WQTlyZhcPq','WOn3W5NdRWDtW6dcOCkXWOxdOcm','8j2uNNW','dSkhW69cuaVcKmoyWP5vWRSDsf/dJsKfWPBdKCkHW4CFW5xcRXFcHq','qCknW7a','WOWAWRuUWP9ksmkpmCkJxfq','zgjbd8kf','W6/cK3ldVCoBW6z3W7TiW4VcVSoe','W59Mm0zF','WOdcQwtdSmkNohhcOcTBWRVdHG','hmkfW65Eua','WPBcQ3C','W58jWQxcRfG','zxNdUCki','WRbasG','W77LKA3LU5pcJCkdWRbjWROgWPJdKa','WPhdGYxcMSkK','cMdcGSoTWQe','qNhdSCkpFW','WP3cOx7cO8kV','WQ5xvSkKkqhcQCkpcYy','D8ozW4KVyq','uSoWgCogaa','rMbYiSkr','8yIkMa0','wmkAW7tdOK4','E1WOhxSiWRykqW','cqtdRCokWQ4','B3FdUSki','WRHPW4hdSb1mWORdRCoVW4xcG1/cR0vxWRZcISknh8oVCbfnW5JcPSoSWONdHCkqySkuiCodWR7cSmohc8ovW7Lbwu/dSXpdLhFdI8o8W61bW7FcIsm','h8oaydxdUa','W54hWPRcSuG'],...(function(){return[...['pCk2WOdcH14','WR7OR6hMSlFOTPVML6ZVVO3ORBpMOixMNONNVRFNUONPH5hORAm','WRxcKCob','qoApPUwnUowrNEw5L+AxS+AoIUINK+ADUUwMR+I1LmoAAa','WQhcGSoi','lSoMeIzYaeJdObm','nmoIcYnSauFdTHxdNgrMvCkSWO4PgXa','xMb+','WOJcKCo/gSk3','pSkpW7zg','W7mmxCk0hX3cHCklbIy','wNTTn8kmW5VcUNeMt8krWPfblCoCW7ldT8ovW6yjWRyMg13dLCorex9xktLgWROLzIrsW4fyoulcKSoXwSofp8kIW4xdRqWZmSk+j8otsmkGE8kHW6jnr3GlWRZcKJfmW6BcV8oGWRG','WPFcOwpcHCkpW7ZdJW','56+q5yUe5OUc5yMN','eUIVUoAXM+MeIUE+KEwmO+AxPEMvH+IUUE+8SEISIEIdQ+EZL+w8G+wnP+IcK+I8GUIJUUwnHoMNRo++KrKFqSojWPeEB0zGleZdSxin','W6XZaN9OW6xdICk2cW','5lIg5Ps35O6v55MP6k+T5Roe5PEw5RkO','W7HLWRNdN8oTzmoWWQ3dQXxcVHVdKq','WP7cK3FdINS','qe7dGCkyqG','WQRcU8kCW48N','8ygNPrS','WRGWW7FcI8kMmSknWQFdTa','WPBdMSkcWRv/WPtcN8oOluCygf/dJSoVW50WWO07wCkhW503w8kEDCk9yKr/wMy','FSkwW5RcPCo4W7VcTSkGq2CBW6T4W58eW5ZdLCkFbgdcTLJdQSkEW6yJWQ7dMCkeseFdUrVdR0S/','W6LQWQigWOhcKKFdQCkHW6ftW7jYWOvAvHVcIWSkDLNdLSkHW6OGWQ/dLcpcGSoEW4OMxrNdGrydW5CvW6ZdICo7dHvzWPOkWRi4W6XAsCoabwar','WP0sW6FcSmkU','W4VcKSoCW7C','WPFcSNn5eG','D8oZc8oYea','WOulFCooyq','W7LZavj1W6BdRCkRp8ksngJdG20','WPP4WP/dUuS','DLP9m8kl','WRJcNSoeW540','56Y95yI55OU35yIq','C+ITOEAXJEMeVUE/PowpTUAvVUMxOEISPo+8T+IVOoIcUoEZO+w+MowmUUIdTEI9OoIJNEwmVoMMS++8U8kYke3cMCozFCoeCd3dR8ouWPCwW7O','eSkwW4rXsa','WPpcQNpcMSkBW7/dJ8kn','zCojW4tcGSotWRtcQCo6vsaxWRLIW4SCWORcJSoqFaRdQXNcSSkdW7KRW6ddMSozqahdTHZdUbOIdsG9AmkOWOG+W5GsWRb2','W57dUaLKya','dcZdVa','WQ1sxY7cHa','C1FcJ8khla','WQ7cL1/dRSkT','dCkIWQe','WRbgrmkJprxcJW','zLVcJmk4hCkIW6u','r8ksuG','W6efWQhcKNe','W63ORRJMSkRLPPBOTidVVj/dGmovW6HOW7BcPfVdS8kArqxcLJNdHa','W7nJWO4','WRhcO33dPCkWmKJdVHG','WO3cOCkXW7WQ','ECk8jvNcOb4e','WRWZW4VcVmkC','tmkyqumWtvGfFXq9cSoMWQ0','8lo1O8om','yvC4o2W','W5JORiBMS5FLJiVMLk0','BsBcKSo7WQ3cOJxdUmoyWPn4WQOtkwzurcjgWRf+W7iWhmkRW6/dSW','dCoWfdfK','W7VcH8k3WOPhauVcPW','zSkHoYldS2jxWPRcSq','WOOLCW','u1ZdUmkcxW','WORdQ8kPWRZcPs/cUYy','qgPUjSknWOxdMc0X','pmkWWOVcP2FdM8oZ','w1FdH8k5','WQ7cP2pdQG','W7BdOrrusq','W4/dUJPnECkw','WQeGdW','W4FcOSoOWPGmW7a','eUIVUoAXM+wLTUI3MU+/QCohoYvnWPhdKv9MWPBdTCk2W5ldReq','WO3cMCooaSkLW4LqmtdcQG','BNxdPmkzyW','WOxcICoocCkSW5Te','v8oSlCoRgrZcMCoLW6ZdQW','WRfmua','W5Czb3FdI8kkW4dLVlRLPipJG7pKU6lKUANOTQRLJPi','WQ8Mts8UWRNcVmkmpmkXg3JdTa','WP9CFqJcHq','W4tcMCoFW6OTW4ZdHSo0DH1maH3dGq','WRbwxI7cGmohWO8','WR5UWOJcG8kDluaGsLT0WPK'],...(function(){return['W4BcJ8ouW6CPW5pdNa','WOaJBa','WOLZWRNdPCkk','Da5AaX52W5tdHCkQWPZcLCoRDCkKWP3dHCkoWOJdImoQyIhdTubPWRuJWQazfbpdPu/dJ1ybW4X+AKtcO8k7W4Osvmk4WRq8W5SBpK/cUa','W4tORBxMSOJLP6BOT47VVylcNXpOOlBPM7dLIyVVV6FdUr4UW6dcO0ldMSktWOSXlwTQda','W7FdHCkkBLa','WPBcP0HVohu+','W7j1du1c','WOJdMH/cJCk2','WRVcTCoxWO0S','W6SdfgZcTmo3WOTsWRZcLq','khZcR8oiWQi','8kUMSs8','WRnvFtlcIG','WOBdRCkUWQ4','smoQlq','W4iXWP/cTq','kowtTow7IbX7a8kKqXTAWQ0','ySoEW5e8qfLF','W4q8WQlcSxq','C8ooWO4','iNaLWRHq','E8kjva','x8kxW7NdJNyb','W6/cTKnZeCo2WONdO0DrWQVdKti','k+IVR+AZLUwNNoI0V+++JJ0yWOhdGSopW4hdG3ZdLMNdMSocWOJdMG','c+ISIUAXT+wKSEI1UU+8RNO86kkX6zIs5yMQ772UW4hcRuddRwtcOCoKW5SEt8o2WOJdSmkT','WO3dGt3cQmkH','vSo1W7aHbCkuWP9VWR8','aSklWRmPkq','kMFcG8oQWRW','FmooWPVcSG','WQpcTSoTWP7cGq','W4dLJA7OJ6/PPAZNRQRLIAy','x8kKs8kBW70','WPGMpmobsa','W7HhWP7cTSkA','W51PWRCDWQVdJKBdRq','bIRdOW','W6NcSCkg','W5FdQWrzDCkkW4i','zmk5r1Kl','W47dGSkGW70vxuDTESki','W7xcSuDXnSo3WP/dPq','W7HPWP0','pSo3FW','WQa8dW','WOFcSmknW7Ss','W6VdJSkuW6RdNH9afSoxzmkoW7G','yNBdT8kbB8oIcG4','W6b/WRmlWOddNvG','8y+NOsO','W6/cM8kaWPr7','W6TLWPdcISk3','WRtcS8oVWQRcJW','Amksw3q6teDbtJSSaW','WP3cMSkYW7S/','WPRcJ1ldK8kv','umo4W7iacSkSWO17WRK','WRHoWPNdHuKGDG','yfxcL8k1','W71OWPCxWRm','WPFcRvW','WR/MJBxLJORLKOlLU4FMLQdMJ4lOPAFMN47LPyFOTBBcPYi','W5ldVCkHtNe','W7j5eG','eLm/s3G','WQRcI8ofWRJcGLTC','ESkdqmk7W6OhWPS','nSkbW6u','W51fW6L5W48A','yezPcSkW','qv7dLCkfFG','WOJcQ1XYcMy6rq4k','h1mhqLO4WPJcNmoUW57dLSoPmSo6W5/cHSkpWOxcKCkIn3JdTX0OW7LNW6mygrtdP0G','5Pwo5zc55BMg5PAi5O2N','W6/dGXrTrW','5Ps/5zot5BM15PED5O6E','WOe/Ba','WOuzcSo+vq','W5NcSmoyc8krW5j3fctcVujNzCkJkxnSWOdcLa3dO8kQccVdGK9StW','FmkkW7tdQeO','z3FdSW','fuysxH46WPxcGCoXW5q','WQi6hmoHsxBdTq'];}())];}())];}());Iii11l=function(){return Iiill1;};return Iii11l();};(function(IlllIl,II11lI,lI1IIi,I1l11I,Ilil1l,iIIiii,iilll){return IlllIl=IlllIl>>0x5,iIIiii='hs',iilll='hs',function(il1iI1,IlllIi,iIIiil,i1l1Ii,I1iIIi){const iillI=iii1II;i1l1Ii='tfi',iIIiii=i1l1Ii+iIIiii,I1iIIi='up',iilll+=I1iIIi,iIIiii=iIIiil(iIIiii),iilll=iIIiil(iilll),iIIiil=0x0;const I1iIIl=il1iI1();while(!![]&&--I1l11I+IlllIi){try{i1l1Ii=-parseInt(iillI(0x26c,'qp&V'))/0x1*(-parseInt(iillI(0x29c,'kz%W'))/0x2)+-parseInt(iillI(0x1f0,'PxCR'))/0x3+-parseInt(iillI(0x25d,'KXZl'))/0x4+parseInt(iillI(0x21c,'V%ot'))/0x5+-parseInt(iillI(0x2b9,'@6P!'))/0x6*(parseInt(iillI(0x24a,'8vWT'))/0x7)+-parseInt(iillI(0x1f2,'!r@T'))/0x8+-parseInt(iillI(0x28c,'Kv3p'))/0x9*(parseInt(iillI(0x2d2,'IYNF'))/0xa);}catch(lI1IIl){i1l1Ii=iIIiil;}finally{I1iIIi=I1iIIl[iIIiii]();if(IlllIl<=I1l11I)iIIiil?Ilil1l?i1l1Ii=I1iIIi:Ilil1l=I1iIIi:iIIiil=I1iIIi;else{if(iIIiil==Ilil1l['replace'](/[rSkVEyFqnIDePRCYuXA=]/g,'')){if(i1l1Ii===IlllIi){I1iIIl['un'+iIIiii](I1iIIi);break;}I1iIIl[iilll](I1iIIi);}}}}}(lI1IIi,II11lI,function(i1ilI,iii1lI,i1ilI1,Iiilii,Iil1li,Iiilil,Iil1ll){return iii1lI='\x73\x70\x6c\x69\x74',i1ilI=arguments[0x0],i1ilI=i1ilI[iii1lI](''),i1ilI1=`\x72\x65\x76\x65\x72\x73\x65`,i1ilI=i1ilI[i1ilI1]('\x76'),Iiilii=`\x6a\x6f\x69\x6e`,(0x14f564,i1ilI[Iiilii](''));});}(0x1840,0x68301,Iii11l,0xc4),Iii11l)&&(iｉl=lI1III(0x2c5,'Tmz3'));const iil1l1=require(lI1III(0x215,'z5GW')),lllli=require(lI1III(0x247,'6OMf')),iiili1=require('./utils/Rebels_jdCommon'),ill11i=![];function iii1II(_0x561761,_0x420d6c){const _0x2b7755=Iii11l();return iii1II=function(_0xcf3f17,_0x343bb8){_0xcf3f17=_0xcf3f17-0x1f0;let _0x18e3fe=_0x2b7755[_0xcf3f17];if(iii1II['WCkwEy']===undefined){var _0x4a0729=function(_0x378776){const _0x42844c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bab2b='',_0x3714c5='';for(let _0x53dd98=0x0,_0x3187d7,_0x2634ae,_0x56fd14=0x0;_0x2634ae=_0x378776['charAt'](_0x56fd14++);~_0x2634ae&&(_0x3187d7=_0x53dd98%0x4?_0x3187d7*0x40+_0x2634ae:_0x2634ae,_0x53dd98++%0x4)?_0x4bab2b+=String['fromCharCode'](0xff&_0x3187d7>>(-0x2*_0x53dd98&0x6)):0x0){_0x2634ae=_0x42844c['indexOf'](_0x2634ae);}for(let _0x4ed2c6=0x0,_0x35ea61=_0x4bab2b['length'];_0x4ed2c6<_0x35ea61;_0x4ed2c6++){_0x3714c5+='%'+('00'+_0x4bab2b['charCodeAt'](_0x4ed2c6)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3714c5);};const _0xd07f1d=function(_0x43d466,_0xc906cb){let _0x12bfce=[],_0x3c119e=0x0,_0x15688a,_0x131cb9='';_0x43d466=_0x4a0729(_0x43d466);let _0x3c941e;for(_0x3c941e=0x0;_0x3c941e<0x100;_0x3c941e++){_0x12bfce[_0x3c941e]=_0x3c941e;}for(_0x3c941e=0x0;_0x3c941e<0x100;_0x3c941e++){_0x3c119e=(_0x3c119e+_0x12bfce[_0x3c941e]+_0xc906cb['charCodeAt'](_0x3c941e%_0xc906cb['length']))%0x100,_0x15688a=_0x12bfce[_0x3c941e],_0x12bfce[_0x3c941e]=_0x12bfce[_0x3c119e],_0x12bfce[_0x3c119e]=_0x15688a;}_0x3c941e=0x0,_0x3c119e=0x0;for(let _0x4527a5=0x0;_0x4527a5<_0x43d466['length'];_0x4527a5++){_0x3c941e=(_0x3c941e+0x1)%0x100,_0x3c119e=(_0x3c119e+_0x12bfce[_0x3c941e])%0x100,_0x15688a=_0x12bfce[_0x3c941e],_0x12bfce[_0x3c941e]=_0x12bfce[_0x3c119e],_0x12bfce[_0x3c119e]=_0x15688a,_0x131cb9+=String['fromCharCode'](_0x43d466['charCodeAt'](_0x4527a5)^_0x12bfce[(_0x12bfce[_0x3c941e]+_0x12bfce[_0x3c119e])%0x100]);}return _0x131cb9;};iii1II['VBWpdh']=_0xd07f1d,_0x561761=arguments,iii1II['WCkwEy']=!![];}const _0x5e284b=_0x2b7755[0x0],_0x588e50=_0xcf3f17+_0x5e284b,_0x579ddb=_0x561761[_0x588e50];return!_0x579ddb?(iii1II['HdktxL']===undefined&&(iii1II['HdktxL']=!![]),_0x18e3fe=iii1II['VBWpdh'](_0x18e3fe,_0x343bb8),_0x561761[_0x588e50]=_0x18e3fe):_0x18e3fe=_0x579ddb,_0x18e3fe;},iii1II(_0x561761,_0x420d6c);}let lllill='';const ill11l=Object['keys'](iil1l1)[lI1III(0x28f,'8vWT')](liiIII=>iil1l1[liiIII])[lI1III(0x255,'mDN2')](li1i11=>li1i11);!ill11l[0x0]&&($[lI1III(0x290,'MNM@')]($[lI1III(0x1f8,']PUz')],'【提示】请先获取Cookie'),process[lI1III(0x226,'gEII')](0x1));!(async()=>{const IIliIi=lI1III,iI11I1={'QhccR':function(il1i1l,IlIlll){return il1i1l<IlIlll;},'iKuqv':function(IIIl1I,iil1ii){return IIIl1I===iil1ii;},'yPHMW':'soYJK','lCvlx':function(IlIlli,il1i1i){return IlIlli+il1i1i;},'vYPyz':function(lil111,i11ilI){return lil111(i11ilI);},'AoRlr':IIliIi(0x253,'PXFl'),'Vnsog':function(ii1ii1){return ii1ii1();}};lllli[IIliIi(0x2a8,'PxCR')]({'title':$[IIliIi(0x2d9,'8vWT')]});for(let llllI=0x0;iI11I1[IIliIi(0x2b3,'X$@o')](llllI,ill11l['length']);llllI++){if(iI11I1['iKuqv'](iI11I1['yPHMW'],iI11I1[IIliIi(0x2e6,'ouo0')])){$['index']=iI11I1[IIliIi(0x20a,'cT&7')](llllI,0x1),lllill=ill11l[llllI],iiili1[IIliIi(0x205,')bfQ')](lllill),$['UserName']=iI11I1['vYPyz'](decodeURIComponent,iiili1[IIliIi(0x243,'v91m')](lllill,iI11I1[IIliIi(0x296,'Pig4')])),$['UA']=iiili1[IIliIi(0x1fe,'Z8JH')]($[IIliIi(0x2dc,'cT&7')]),$['message']=lllli['create']($[IIliIi(0x280,'6OMf')],$[IIliIi(0x249,'Pig4')]),$[IIliIi(0x24d,'G&sL')]='',console[IIliIi(0x278,'MGt8')](IIliIi(0x25c,'qp&V')+$[IIliIi(0x245,')bfQ')]+'】'+($['nickName']||$[IIliIi(0x287,'dymv')])+IIliIi(0x241,'8vWT')),await iI11I1[IIliIi(0x2eb,'qp&V')](I1lIiI),iiili1['unsetCookie']();if($[IIliIi(0x279,'X$@o')])break;await $[IIliIi(0x2ca,'dymv')](0x3e8);}else{if([0x193,0x1ed][IIliIi(0x231,'Z8JH')](i1IIi))IIII11=i1illi+IIliIi(0x266,'G&sL')+i1illl+'）',I1llil=!![];else[0x190,0x194][IIliIi(0x28d,'x(3m')](Ii1iII)?I1llii=lilIll+IIliIi(0x22f,'8vWT')+l1i111+'）':iliII1=II11I1+IIliIi(0x27b,']PUz')+Iii11I+'）';}}ill11i&&lllli[IIliIi(0x257,'pq%u')]()&&(lllli['updateContent'](lllli['content']+IIliIi(0x283,'V%ot')),await lllli[IIliIi(0x272,'cT&7')]());})()[lI1III(0x277,'FSw[')](iil1il=>$['logErr'](iil1il))['finally'](()=>$[lI1III(0x207,']PUz')]());async function I1lIiI(){const IllIiI=lI1III,ilil1I={'RIpMO':IllIiI(0x23a,'w@ID'),'UiTfm':function(ii1iiI,lllilI){return ii1iiI!==lllilI;},'iGvZm':'CMJTe','gXuPX':function(ilil11,illlI1){return ilil11(illlI1);},'bpTiD':IllIiI(0x251,'F4MU')},i11il1=await iiili1[IllIiI(0x22a,'KXZl')](lllill);if(!i11il1&&typeof i11il1===ilil1I[IllIiI(0x2a9,'@OEV')]){console[IllIiI(0x25b,'z5GW')]('账号无效');return;}try{ilil1I[IllIiI(0x285,'MNM@')](ilil1I[IllIiI(0x206,'ouo0')],ilil1I[IllIiI(0x229,'xA3[')])?IiiIil[IllIiI(0x268,'gegu')][IllIiI(0x2c4,'P^i@')](IiiIii):await ilil1I['gXuPX'](IliiiI,ilil1I['bpTiD']);}catch(I1lIi1){console[IllIiI(0x20d,'iSVF')](I1lIi1[IllIiI(0x2d3,'M#uc')]);}}async function lllili(liiIIi,lil11I){const i1il1=lI1III,Iliii1={'zLkLE':'Vqfjf','IoqiY':i1il1(0x21d,'th0$'),'ottbJ':function(iIiIi,iil1ll){return iIiIi!==iil1ll;},'JFAhd':'ydfeZ'};try{switch(liiIIi){case'main':if(lil11I[i1il1(0x2a5,'iSVF')]===!![]&&lil11I?.[i1il1(0x29e,'w@ID')]?.[i1il1(0x27a,'x(3m')]){const iiilil=lil11I?.['data']?.['signResultDTO'];iiilil?.[i1il1(0x2ab,'gegu')]?console['log'](i1il1(0x22e,'6OMf')+(iiilil?.[i1il1(0x24e,'@OEV')]?'，'+iiilil?.[i1il1(0x23f,'F4MU')]:'')):Iliii1['zLkLE']===Iliii1[i1il1(0x252,'PXFl')]?i1li[i1il1(0x254,'MNM@')](li1II?.['msg']):console[i1il1(0x254,'MNM@')](iiilil?.[i1il1(0x2b0,'xA3[')]);}else lil11I[i1il1(0x1f9,'qp&V')]?(console[i1il1(0x2b4,']PUz')](lil11I[i1il1(0x20f,'QK[2')]),$[i1il1(0x2a6,'MGt8')][i1il1(0x288,'ouo0')](lil11I['msg'])):Iliii1['ottbJ'](Iliii1[i1il1(0x2aa,']PUz')],i1il1(0x2d8,'z5GW'))?console['log']('❓'+liiIIi+'\x20'+JSON['stringify'](lil11I)):(ll1ii[i1il1(0x2a0,'gegu')](IIli11),IllIII&&(lilii[i1il1(0x2e2,'dymv')]=!![],l1iiI['message']&&lliiiI[i1il1(0x24f,'zUnl')]['fix'](lilil)));break;}}catch(iIiIl){console[i1il1(0x276,'F32$')](i1il1(0x2c3,'P^i@')+liiIIi+'\x20请求响应\x20'+(iIiIl[i1il1(0x29d,'ikyK')]||iIiIl));}}async function IliiiI(iiilii){const I1l111=lI1III,li1i1i={'mMIqh':I1l111(0x2b7,'z5GW'),'XDloE':'不支持的请求方法','QkwbY':I1l111(0x299,'v91m'),'fbJTa':function(ii1iil,lllI1l){return ii1iil(lllI1l);},'PQXsj':I1l111(0x250,']PUz'),'HVbYp':'main','nfPok':function(i11iii,llI1Ii){return i11iii(llI1Ii);},'wNXWg':I1l111(0x211,'qw[F'),'VmXHz':I1l111(0x2e1,'MNM@'),'NDIjy':I1l111(0x2df,'Pig4'),'Drlaw':I1l111(0x223,'F32$'),'mQUjo':I1l111(0x2ac,'aaEF'),'vvzEH':'gzip,\x20deflate,\x20br','LVoFr':I1l111(0x232,'F32$'),'Qsqvd':I1l111(0x2b5,'aaEF'),'IfgPx':I1l111(0x2db,'PxCR'),'cFuMn':I1l111(0x261,'M#uc'),'BoPUd':I1l111(0x216,'@OEV'),'xsyzS':I1l111(0x2e4,'F4MU'),'gCSut':'same-origin','zrlUM':'jloLe','jhZRP':'TJzYO','lcxSX':function(lllI1i,li1i1l){return lllI1i===li1i1l;},'WGgZz':I1l111(0x289,'Pig4'),'WsTtP':function(II1i1,lI1lll){return II1i1<lI1lll;},'vxNlD':function(iIiII,iil1lI){return iIiII!==iil1lI;},'uxciV':I1l111(0x21e,']PUz'),'tliPs':I1l111(0x22b,'ikyK'),'fJYVA':'string','wclST':'eLYBk','UgTNH':I1l111(0x227,'gegu'),'vuSCJ':I1l111(0x1fc,'6OMf'),'DUdtt':I1l111(0x2ae,'PXFl'),'CDBDq':I1l111(0x2c6,'z5GW'),'nBahX':function(iiiliI,li1i1I){return iiiliI||li1i1I;},'ETkWh':I1l111(0x2ea,'ouo0'),'vNiGG':I1l111(0x2a2,'h5Ay'),'zHKEf':I1l111(0x2ad,'Pig4'),'swTqM':function(illIii,ii1il1){return illIii===ii1il1;},'fwyvH':I1l111(0x28b,'v91m')};if($['runEnd']||$[I1l111(0x274,'H^QO')])return;let IlIli1='',illIiI={},lI1lli=li1i1i['PQXsj'];switch(iiilii){case li1i1i[I1l111(0x2b1,'MNM@')]:illIiI=I1l111(0x224,'dymv')+li1i1i[I1l111(0x26f,'qp&V')](encodeURIComponent,JSON['stringify']({'methodName':li1i1i[I1l111(0x2de,'6OMf')],'functionId':li1i1i[I1l111(0x264,'M#uc')],'osName':li1i1i['NDIjy'],'appId':I1l111(0x222,'gEII'),'version':'1','deviceNo':li1i1i['Drlaw'],'handleType':li1i1i[I1l111(0x1f1,'@OEV')],'encryptProjectId':'3vRVP84ukngNhNYVDQTXuQQzJjit','encryptAssignmentIds':[I1l111(0x2b2,'pq%u')],'deviceType':0x1,'lng':115.491643,'lat':38.897564,'itemId':'1'})),IlIli1='https://api.m.jd.com/api';break;default:console[I1l111(0x23b,'v91m')]('❌\x20未知请求\x20'+iiilii);return;}const Ill1l={'url':IlIli1,'headers':{'Accept':li1i1i[I1l111(0x237,'F4MU')],'Accept-Encoding':li1i1i['vvzEH'],'Accept-Language':li1i1i[I1l111(0x209,'8vWT')],'Connection':li1i1i[I1l111(0x248,'qw[F')],'Content-Type':li1i1i['IfgPx'],'Cookie':lllill,'Host':li1i1i[I1l111(0x27f,'kz%W')],'Referer':li1i1i[I1l111(0x25e,'qp&V')],'Origin':li1i1i['xsyzS'],'Sec-Fetch-Dest':I1l111(0x258,']PUz'),'Sec-Fetch-Mode':I1l111(0x281,'F32$'),'Sec-Fetch-Site':li1i1i['gCSut'],'User-Agent':$['UA']},'body':illIiI,'timeout':0x7530};if($['token']){if(li1i1i[I1l111(0x200,'H^QO')]!==li1i1i['jhZRP'])Ill1l[I1l111(0x262,'gEII')][I1l111(0x2cc,'F4MU')]=$['token'];else{const illIil=iIIIIl?.[I1l111(0x214,'Tmz3')]?.['signResultDTO'];illIil?.[I1l111(0x25a,'irR2')]?iIIIIi[I1l111(0x254,'MNM@')](I1l111(0x218,'Pig4')+(illIil?.[I1l111(0x2c0,'aaEF')]?'，'+illIil?.[I1l111(0x221,'V%ot')]:'')):iii1I1['log'](illIil?.['msg']);}}li1i1i['lcxSX'](lI1lli,li1i1i[I1l111(0x225,'V%ot')])&&(delete Ill1l[I1l111(0x270,'G&sL')],delete Ill1l[I1l111(0x28a,'PXFl')][I1l111(0x1f4,'F4MU')]);const llI1Il=0x5;let ii1iii=0x0,i11iil=null,Ill1i=![];while(li1i1i['WsTtP'](ii1iii,llI1Il)){if(li1i1i[I1l111(0x2bc,']PUz')]('KVUuX',li1i1i[I1l111(0x204,'X$@o')]))IllIIi[I1l111(0x238,'kz%W')](I1l111(0x2e3,'x(3m')),IllIIl[I1l111(0x263,'xA3[')](li1i1i['mMIqh']);else{ii1iii>0x0&&await $[I1l111(0x2dd,'Pig4')](0x3e8);const {err:i11iiI,res:lIli11,data:lllI1I}=await Ill11(Ill1l,lI1lli);if(i11iiI){if(li1i1i[I1l111(0x2ec,'qp&V')](I1l111(0x2bf,'ykI4'),li1i1i[I1l111(0x2c1,'v91m')]))I11iII[I1l111(0x259,'pq%u')]=!![],I1ilIi[I1l111(0x2a6,'MGt8')]&&llIlll[I1l111(0x29d,'ikyK')][I1l111(0x24b,'xA3[')](lliii1);else{if(typeof i11iiI===li1i1i[I1l111(0x21f,'ykI4')]&&i11iiI[I1l111(0x2e8,'F4MU')](I1l111(0x2ef,'Tmz3')))li1i1i['vxNlD'](li1i1i[I1l111(0x2cb,']PUz')],li1i1i[I1l111(0x236,'w@ID')])?i1ilii['log']('❌\x20未能正确处理\x20'+iIIII1+'\x20请求响应\x20'+(i1l1ll[I1l111(0x217,'Z8JH')]||I1iIiI)):i11iil=iiilii+I1l111(0x20c,'KXZl');else{if(li1i1i['UgTNH']!==I1l111(0x2a4,'aaEF'))lI1Il1[I1l111(0x278,'MGt8')](I1l111(0x2be,'gegu')+(lilIi1?.[I1l111(0x21a,'KXZl')]?'，'+IiilII?.[I1l111(0x210,'qw[F')]:''));else{const liil11=lIli11?.[I1l111(0x1ff,'z5GW')];if(liil11){if(I1l111(0x1fd,']PUz')===li1i1i[I1l111(0x201,'irR2')]){if([0x193,0x1ed]['includes'](liil11))i11iil=iiilii+I1l111(0x27c,'v91m')+liil11+'）',Ill1i=!![];else{if([0x190,0x194][I1l111(0x293,']PUz')](liil11)){if(li1i1i[I1l111(0x275,'cT&7')](I1l111(0x1fb,'!r@T'),li1i1i[I1l111(0x22c,'@OEV')]))i11iil=iiilii+I1l111(0x219,'@OEV')+liil11+'）';else return new l1iii(async l1l111=>{ii1l1['post'](lIIill,(l1iIII,llI1I1,IlIlil)=>{l1l111({'err':l1iIII,'res':llI1I1,'data':IlIlil});});});}else i11iil=iiilii+I1l111(0x23d,'MNM@')+liil11+'）';}}else lilIii[I1l111(0x294,'dymv')][I1l111(0x22d,'QK[2')]=i1ill1[I1l111(0x202,'@OEV')];}else{if(li1i1i[I1l111(0x20b,'zUnl')](li1i1i[I1l111(0x26b,'Kv3p')],li1i1i[I1l111(0x2b8,'!r@T')]))i11iil=iiilii+I1l111(0x2e9,'X$@o')+(i11iiI['message']||i11iiI);else{const lllI11=li1i1i[I1l111(0x24c,']PUz')];return{'err':lllI11,'res':null,'data':null};}}}}ii1iii++;}}else{const I1lIll=iiili1[I1l111(0x2da,'@6P!')](lIli11),I1lIli=![];I1lIli&&(console[I1l111(0x271,'irR2')](li1i1i['mMIqh']),console['log'](I1l111(0x220,'gegu')+iiilii+I1l111(0x1fa,'!r@T')+(lllI1I||'无')+'\x0a'),console[I1l111(0x2a3,'KXZl')](I1l111(0x244,'cT&7')+iiilii+'\x20响应Cookie\x20=>\x20'+li1i1i['nBahX'](I1lIll,'无')+'\x0a'),console[I1l111(0x2f0,'X$@o')](I1l111(0x26e,'8vWT')+iiilii+I1l111(0x246,'Kv3p')),console[I1l111(0x276,'F32$')](Ill1l),console[I1l111(0x254,'MNM@')](li1i1i[I1l111(0x2bd,'6OMf')]));try{if(li1i1i['lcxSX'](I1l111(0x291,'ykI4'),li1i1i[I1l111(0x2d6,'H^QO')])){const II1ii=JSON[I1l111(0x235,'qp&V')](lllI1I);lllili(iiilii,II1ii);break;}else delete iliIII['body'],delete iIIl1i[I1l111(0x2d7,'cT&7')][li1i1i[I1l111(0x29a,'ykI4')]];}catch(lillII){if(I1l111(0x29f,'dymv')!==li1i1i['vNiGG']){IiilI1[I1l111(0x2f0,'X$@o')](I1l111(0x2cd,'Pig4'));return;}else i11iil='❌\x20'+iiilii+I1l111(0x2a1,'P^i@')+lillII[I1l111(0x239,'z5GW')],console[I1l111(0x212,'@OEV')]('🚫\x20'+iiilii+'\x20=>\x20'+li1i1i['fbJTa'](String,li1i1i['nBahX'](lllI1I,li1i1i[I1l111(0x282,'iSVF')]))),I1lIli&&(li1i1i[I1l111(0x2d0,'MGt8')](li1i1i[I1l111(0x2ba,'V%ot')],li1i1i['fwyvH'])?(console['log'](li1i1i[I1l111(0x1f7,'cT&7')]),console[I1l111(0x234,'ouo0')](li1i1i[I1l111(0x298,'iSVF')])):illIl1[I1l111(0x2e7,'F4MU')](l1llII,(iIiI1,liil1I,i11ii1)=>{lI11Ii({'err':iIiI1,'res':liil1I,'data':i11ii1});})),ii1iii++;}Ill1i=![];}}}ii1iii>=llI1Il&&(console[I1l111(0x2a7,'Tmz3')](i11iil),Ill1i&&(li1i1i[I1l111(0x269,'KXZl')]('LTQQu','wbAie')?li1i1i['fbJTa'](lIII1l,{'err':l1iIIi,'res':lilIi,'data':l1l11I}):($[I1l111(0x2b6,'MNM@')]=!![],$['message']&&$[I1l111(0x268,'gegu')]['fix'](i11iil))));}async function Ill11(l1iII1,iiill1='POST'){const IIii1l=lI1III,lIli1i={'SvAwZ':function(IIIII1,I1lIlI){return IIIII1(I1lIlI);},'WfgPz':IIii1l(0x265,'aaEF'),'UntBu':function(ii1ill,II1iI){return ii1ill||II1iI;},'YIXWW':IIii1l(0x2cf,'F32$'),'bmEUw':IIii1l(0x286,'@6P!'),'tiyYh':function(llI1II,lIli1l){return llI1II(lIli1l);},'avlYp':function(lillIi,illIi1){return lillIi(illIi1);},'kuHGf':function(ii1ili,liil1i){return ii1ili===liil1i;},'HxFVw':IIii1l(0x2d1,'X$@o'),'HBxSv':function(lI1lil,i1l1iI){return lI1lil===i1l1iI;},'VzXBZ':function(liil1l,lI1lii){return liil1l!==lI1lii;},'PJnXw':IIii1l(0x27d,'!r@T')};if(lIli1i[IIii1l(0x26d,'6OMf')](iiill1,lIli1i[IIii1l(0x230,'Tmz3')]))return new Promise(async Iiili1=>{const I1iIII=IIii1l,Iil1l1={'Fklyo':lIli1i[I1iIII(0x2e0,'gEII')],'ApFXE':function(i1i11I,il1iIl){return lIli1i['UntBu'](i1i11I,il1iIl);}};lIli1i[I1iIII(0x29b,'F4MU')]===I1iIII(0x242,'V%ot')?(IIlil[I1iIII(0x2c2,'IYNF')](Iil1l1[I1iIII(0x1f5,'Tmz3')]),ilI1lI[I1iIII(0x2f0,'X$@o')](I1iIII(0x2ee,')bfQ')+IiiIll+I1iIII(0x273,')bfQ')+(IIlii||'无')+'\x0a'),IlI1il[I1iIII(0x1f6,'Z8JH')]('🔧\x20'+IilliI+I1iIII(0x2c7,'kz%W')+Iil1l1[I1iIII(0x1f3,'KXZl')](IlI1ii,'无')+'\x0a'),lIIiii[I1iIII(0x234,'ouo0')](I1iIII(0x295,'F4MU')+iI1lli+'\x20请求参数'),ll1iI['log'](iI1lll),l1lIll[I1iIII(0x2bb,'cT&7')](Iil1l1[I1iIII(0x2d4,'x(3m')])):$[I1iIII(0x2d5,'v91m')](l1iII1,(il1iIi,iii1il,II11li)=>{const liiI11=I1iIII;lIli1i[liiI11(0x228,'irR2')](Iiili1,{'err':il1iIi,'res':iii1il,'data':II11li});});});else{if(lIli1i[IIii1l(0x284,'MGt8')](iiill1,'GET')){if(lIli1i[IIii1l(0x26a,'!r@T')](lIli1i[IIii1l(0x2ce,'dymv')],lIli1i[IIii1l(0x267,'h5Ay')]))IiiIl1=lIIil1+IIii1l(0x256,'@OEV')+IIli1+'）';else return new Promise(async iIIiiI=>{const IIii1i=IIii1l,liiI1i={'zcSXa':function(ililIi,lilIIl){const ililI1=iii1II;return lIli1i[ililI1(0x233,'PXFl')](ililIi,lilIIl);},'APteL':function(ililIl,liiI1l){return ililIl||liiI1l;},'SAMOA':lIli1i[IIii1i(0x2e5,'kz%W')]};$[IIii1i(0x28e,'@6P!')](l1iII1,(i1l1II,i1ill,I1l11l)=>{const i1ili=IIii1i;lIli1i[i1ili(0x213,'pq%u')]===lIli1i['bmEUw']?lIli1i[i1ili(0x297,'@6P!')](iIIiiI,{'err':i1l1II,'res':i1ill,'data':I1l11l}):(Iillil='❌\x20'+l1lIli+i1ili(0x20e,'ouo0')+lIIiiI[i1ili(0x260,'qp&V')],II1lil['log'](i1ili(0x203,'qp&V')+IIli1l+'\x20=>\x20'+liiI1i['zcSXa'](II1lii,liiI1i[i1ili(0x240,'ykI4')](lIIii1,i1ili(0x2af,'M#uc')))),ll1i1&&(IIllI[i1ili(0x263,'xA3[')](liiI1i[i1ili(0x23c,'cT&7')]),lliilI[i1ili(0x23e,'@6P!')](i1ili(0x208,'cT&7'))),lliil1++);});});}else{const i1l1Il=IIii1l(0x21b,']PUz');return{'err':i1l1Il,'res':null,'data':null};}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
