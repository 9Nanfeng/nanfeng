/*
京豆红包雨

cron:1 1 1 1 * jd_redrain_hby.js

*/

const $ = new Env('京豆红包雨');
var iｉl='jsjiami.com.v7';const I1llII=iii1II;(function(l1l1il,I11i1I,iliIi1,l1l1ii,Il1i1I,Ii1iii,iIIilI){return l1l1il=l1l1il>>0x7,Ii1iii='hs',iIIilI='hs',function(il1l1,Ii1iil,Ilil1i,iili1,II11ii){const I11i11=iii1II;iili1='tfi',Ii1iii=iili1+Ii1iii,II11ii='up',iIIilI+=II11ii,Ii1iii=Ilil1i(Ii1iii),iIIilI=Ilil1i(iIIilI),Ilil1i=0x0;const Iil1iI=il1l1();while(!![]&&--l1l1ii+Ii1iil){try{iili1=-parseInt(I11i11(0x1e7,'x@9L'))/0x1*(parseInt(I11i11(0x2af,'Cq&c'))/0x2)+-parseInt(I11i11(0x236,'o1PR'))/0x3*(parseInt(I11i11(0x2f0,'[@a6'))/0x4)+-parseInt(I11i11(0x247,'Cq&c'))/0x5+parseInt(I11i11(0x203,'&&K@'))/0x6*(-parseInt(I11i11(0x2d2,'ZrNW'))/0x7)+parseInt(I11i11(0x1e3,'ms!4'))/0x8+parseInt(I11i11(0x221,'B8*l'))/0x9*(-parseInt(I11i11(0x2bd,'B)R%'))/0xa)+-parseInt(I11i11(0x204,'uU7K'))/0xb*(-parseInt(I11i11(0x2ab,'imoV'))/0xc);}catch(II11il){iili1=Ilil1i;}finally{II11ii=Iil1iI[Ii1iii]();if(l1l1il<=l1l1ii)Ilil1i?Il1i1I?iili1=II11ii:Il1i1I=II11ii:Ilil1i=II11ii;else{if(Ilil1i==Il1i1I['replace'](/[xAOdYRCQhPUufkeIEGDlyX=]/g,'')){if(iili1===Ii1iil){Iil1iI['un'+Ii1iii](II11ii);break;}Iil1iI[iIIilI](II11ii);}}}}}(iliIi1,I11i1I,function(iIIil1,IlllII,I1il1I,II111,lI1l1I,lill11,liI1i1){return IlllII='\x73\x70\x6c\x69\x74',iIIil1=arguments[0x0],iIIil1=iIIil1[IlllII](''),I1il1I=`\x72\x65\x76\x65\x72\x73\x65`,iIIil1=iIIil1[I1il1I]('\x76'),II111=`\x6a\x6f\x69\x6e`,(0x150e02,iIIil1[II111](''));});}(0x5e00,0x7bd4d,Iii11l,0xbe),Iii11l)&&(iｉl=`\xda8`);const iil1li=require('./jdCookie'),lillIl=require(I1llII(0x25f,'cqi#')),iIiIl=require(I1llII(0x2bb,'s5wM')),iiilii=![];let li1i1i='';function iii1II(_0x33bc53,_0x545243){const _0x50eafa=Iii11l();return iii1II=function(_0x4d6d0d,_0xfd8e83){_0x4d6d0d=_0x4d6d0d-0x1dd;let _0x15d26b=_0x50eafa[_0x4d6d0d];if(iii1II['EaPkpG']===undefined){var _0x11fae6=function(_0x418b65){const _0x4adcbd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x508228='',_0x589985='';for(let _0x3bf8ac=0x0,_0x56d85f,_0x1e806f,_0xafa626=0x0;_0x1e806f=_0x418b65['charAt'](_0xafa626++);~_0x1e806f&&(_0x56d85f=_0x3bf8ac%0x4?_0x56d85f*0x40+_0x1e806f:_0x1e806f,_0x3bf8ac++%0x4)?_0x508228+=String['fromCharCode'](0xff&_0x56d85f>>(-0x2*_0x3bf8ac&0x6)):0x0){_0x1e806f=_0x4adcbd['indexOf'](_0x1e806f);}for(let _0xf69224=0x0,_0x4f054a=_0x508228['length'];_0xf69224<_0x4f054a;_0xf69224++){_0x589985+='%'+('00'+_0x508228['charCodeAt'](_0xf69224)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x589985);};const _0x1e3487=function(_0x37807c,_0x4f0166){let _0xa11e94=[],_0x505b33=0x0,_0x5ed56a,_0x5ca3ad='';_0x37807c=_0x11fae6(_0x37807c);let _0x3322bd;for(_0x3322bd=0x0;_0x3322bd<0x100;_0x3322bd++){_0xa11e94[_0x3322bd]=_0x3322bd;}for(_0x3322bd=0x0;_0x3322bd<0x100;_0x3322bd++){_0x505b33=(_0x505b33+_0xa11e94[_0x3322bd]+_0x4f0166['charCodeAt'](_0x3322bd%_0x4f0166['length']))%0x100,_0x5ed56a=_0xa11e94[_0x3322bd],_0xa11e94[_0x3322bd]=_0xa11e94[_0x505b33],_0xa11e94[_0x505b33]=_0x5ed56a;}_0x3322bd=0x0,_0x505b33=0x0;for(let _0x152896=0x0;_0x152896<_0x37807c['length'];_0x152896++){_0x3322bd=(_0x3322bd+0x1)%0x100,_0x505b33=(_0x505b33+_0xa11e94[_0x3322bd])%0x100,_0x5ed56a=_0xa11e94[_0x3322bd],_0xa11e94[_0x3322bd]=_0xa11e94[_0x505b33],_0xa11e94[_0x505b33]=_0x5ed56a,_0x5ca3ad+=String['fromCharCode'](_0x37807c['charCodeAt'](_0x152896)^_0xa11e94[(_0xa11e94[_0x3322bd]+_0xa11e94[_0x505b33])%0x100]);}return _0x5ca3ad;};iii1II['yoJSiM']=_0x1e3487,_0x33bc53=arguments,iii1II['EaPkpG']=!![];}const _0x5c7b84=_0x50eafa[0x0],_0x29e15e=_0x4d6d0d+_0x5c7b84,_0x40d1e6=_0x33bc53[_0x29e15e];return!_0x40d1e6?(iii1II['JLlvBl']===undefined&&(iii1II['JLlvBl']=!![]),_0x15d26b=iii1II['yoJSiM'](_0x15d26b,_0xfd8e83),_0x33bc53[_0x29e15e]=_0x15d26b):_0x15d26b=_0x40d1e6,_0x15d26b;},iii1II(_0x33bc53,_0x545243);}const IlIli1=Object[I1llII(0x24f,'ms!4')](iil1li)[I1llII(0x258,'X1FT')](Ill1i=>iil1li[Ill1i])['filter'](ii1iil=>ii1iil);!IlIli1[0x0]&&($[I1llII(0x2e7,'V6bJ')]($['name'],'【提示】请先获取Cookie'),process[I1llII(0x288,'nCX&')](0x1));!(async()=>{const Iil1il=I1llII,lllI1l={'CytpM':function(i11iii,llI1Ii){return i11iii<=llI1Ii;},'afAiu':function(lllI1i,li1i1l){return lllI1i<li1i1l;},'FBTMv':'XGVtN','Vmdsj':function(II1i1,lI1lll){return II1i1+lI1lll;},'YlWVw':function(iIiII,iil1lI){return iIiII(iil1lI);},'aLEUq':Iil1il(0x267,'N2vI'),'PTEEo':function(iiiliI){return iiiliI();}};authorCodeList=await i11iil(Iil1il(0x2c5,'ms!4'));if(lllI1l[Iil1il(0x2ad,'E(0l')](authorCodeList?.[Iil1il(0x22c,'nCX&')],0x0)){console[Iil1il(0x296,'DqgI')]('\x0a当期活动已经结束,请等待下次活动\x0a');return;}lillIl[Iil1il(0x224,'2QHh')]({'title':$[Iil1il(0x21d,'yRnR')]});for(let li1i1I=0x0;lllI1l['afAiu'](li1i1I,IlIli1['length']);li1i1I++){if(Iil1il(0x250,'5CDY')===lllI1l[Iil1il(0x2ef,'uU7K')]){$[Iil1il(0x2ca,'BOiy')]=lllI1l[Iil1il(0x219,'X1FT')](li1i1I,0x1),li1i1i=IlIli1[li1i1I],iIiIl[Iil1il(0x2cc,'OF(t')](li1i1i),$[Iil1il(0x1f8,'nCX&')]=lllI1l['YlWVw'](decodeURIComponent,iIiIl[Iil1il(0x259,'0JnT')](li1i1i,lllI1l['aLEUq'])),$['message']=lillIl[Iil1il(0x2de,'V6bJ')]($[Iil1il(0x243,'dK7n')],$['UserName']),$[Iil1il(0x294,'2QHh')]='',console[Iil1il(0x2e0,'X1FT')](Iil1il(0x26d,'Cq&c')+$[Iil1il(0x29d,'QwPC')]+'】'+($['nickName']||$[Iil1il(0x26a,'9Yin')])+'******\x0a'),$['UA']=iIiIl[Iil1il(0x23c,'B)R%')]($['UserName']),await lllI1l[Iil1il(0x280,'ZrNW')](illIiI),iIiIl[Iil1il(0x229,'0JnT')]();if($['runEnd'])break;await $[Iil1il(0x2d3,'QwPC')](0x3e8);}else l1l1II=Iil1I1+Iil1il(0x27d,'nCX&')+Ii1iII+'）',l1i11I=!![];}iiilii&&lillIl[Iil1il(0x25b,'V6bJ')]()&&await lillIl[Iil1il(0x292,'Udp)')]();})()[I1llII(0x272,'&&K@')](ii1il1=>$[I1llII(0x1ed,'K[c2')](ii1il1))[I1llII(0x227,'&&K@')](()=>$[I1llII(0x255,'1UH@')]());function Iii11l(){const lill1I=(function(){return[...[iｉl,'dOjIsXkjOCieaGOmi.ADcuhfoeRUmxEY.yvIP7lQ==','FaJdQCowW5xcUCotBmopW5tdHxubwaDiz8kUW5ZcSuvLW6pcT8k0WQ9+W5GFWRhcVNdcNCojWPzXemklW4VcQSkdyfmeWOpdHfS','bg8q','W4SOy23cKq','cmorW7C','iCkbFtJcKq','WQVdJeBdT8ks','W4xcUGbNzCkBbmkrWO5iWRW','W7j0WQDImW','W4tcVSkcW7Cm','W7Dusf4Q','W7v7FmoEa2yUW5pcU8k2qeBcKWvhx1xdISkLzmooWPqg','5BYj5Awt56YH','ac0BWRn9h8kzW7C5WOGG','W4/cOSo6','WPjWfrdcGNRcNMxcVN8','W6BcJ8otWOldOa','nKWjWOZdVa','F8oswebsW5yycq','W4hdQw9YW6VdLNVcK8onEW','WP7MN4NOJlNLJ7lLIQRMLiFMJ7ZdM+wpMEIdNoA1R+wjTow3Q+E4GUE6QUACPa','dfCRk8kGbmoPjCkVW7JdQCkEW5hcGSkDW4i3he7dH8oDW4HdWOpcIXhdQSoVWQOhW6lcKMOtW4fXzcvK','W7nLW7S5WRK','n8obFftcPG','WORdI2ynlCkTAa','W4egzN7cTq','g8oBDL/cUa','q8khiGpdUgOODWTSWPJcTSk9','W6FcHSo6z8o1gmo5WP5t','W73cJCoTsmoVe8o3WOq','ymo2BJT6WRL0WPK','mXZdOmkytN7dRMNcLCoBWQu','W5P3W54aWPC','fCoVAeVcUa','o8kQpg5wWOXlWRRcP8o8','W4jfW50B','WOpORlRMS5/LP57OTQ3cJ8oOiX4','E+IVT+AWJ+MgU+E/IUwmM+AxG+MuNoISOU+8JUITNUIbMUEXRow/OEwnJUIcPUI+PoIGLUwnPEMLUU+9JYjncmoztW3dL8o1oSo1vmoDwSoN','aM0FWQ7dLq','zSktqMeFWPO','FCkQDSksBa','mG3dTSknswNdNK/cN8oy','rCozW73cKN4','wComW5Xnu2y','sCoAySoBW48','cCoBW6pdOCoAWRZcQW','v8kTv8k7sdW','dMKp','W7zJBG','jZhcI3Kb','4P6BioACO+ECVUISN+AZI8kK','dxGEW4G','W7NcGSoKuCo4','WO/dMMeop8oWiSohWPtdJ8onW7DKW5/dGHBcIMOIWQy','WQPhWQTjWP4','wCkSvq','odCj','C25Waa','W7NcMSkk','WQBdPxaVoW','WP3dGeRdT8k8','ltBdLCkBvW','sSozeSoicSkAi8oClrGMW4ldTcq','mSoxW61ipa','nvNdSmkGWQpcPCo6uCkxW5dcJrm','ESotxa','W5xcOSkiW7u/','WRG8uCkwAJjlWO0','WQmVjSkzW6C','4PYUW4ZMNiROGOdMRlJNOO3LPz3NKjZcLq','qCotaq','vHbPBCkRhCkHkSkSW6NdR8oP','WQ/dGw86cW','WO1xWQ5PWOPsW6RcPvdcSCkSebSUzSoXi0ZdPIpdRwFcL29uW59qW5zAhCoPWPPpfmo9n3unWOxcM8kfW6HfkSodWOdcVcZcN8oYWQhcLmoSdmoGCCkvfxFcLmkMtCoXtSovASkHWQpdSuD2zZX4mb3cKeZcHCk/WPNcL8oehSo+WPxcPCkVD0qMW4ddJ8kLtCktW7ddHcFdVCoOWQ3dPmkkW5NdNmkGCuOnESouWRWPB00/g2RdPdtdVmozWOHF','WPldOf/dKG','rSooWQJdQmoLW7iAWRePWPC','WQldM1yhkW','5lQZ5PAC5O6e55Mu6k2I5Rk35PAv5RkJ','xvjuW5uJ','a8oACu/cQG','lteKnCog','xmkzW4uAWRhdMW','oWRdS8k/Aa','44oE5O2b56sk44gK6k+k5yAT6i2f5y24aaqroHNcHa','qUISM+AXOUwLJoI1VU+/RXbk6kcE6zIH5yQ+77+IlZNdLmkQauBdGNH6WQiECmkcWRG','WRJcQ2bzgq','gCkhyI7cOa','fJRcMNO','6lAX5yY45Pwd5PsN','8y6lQgK','z8onW4vQFW','e+IVRoAXR+wMTUI1Qo+9USkGW5dOO6VPMQ3LIzlVV6zDW6tcV8oVWQ7dLmkgWOa9WR/cOXKfqq'],...(function(){return[...['WR3dOu7dVmk0h8kSFa','uUAmKowpSEwtT+w5LoAuQ+AnTEINO+AFVowKPoI3QCoJW4G','mmoesW','W7y0vN3cKa','bSoUbSkousnAW5yz','EmkjsW','r8oDW51xxgBdKq','WPOrWQ1GWOykbmoqwW0','eCo7W5P3m8orj8oxstDcCsWXtSkJ','hmkfrdNcOgZcGG','WQ0LsSoHga','xtnfWO7dRuiBlaRdNG','rCkNWOK8CSkqymoWxcf8EXO','ymoeW6tcPKm','WOPmE8oaiG','WRytjmkxW4m','8kMKP20','5PEu5zcs5BQM5PAQ5O2s','WRNcRZyoW74','rmoYeCordW','g3aBW5xdJG','W5dcO8k0W7iQ','i2yl','lmkTW6FcMCos','WOysWOjBW6BdPSoSW67dUvOL','W4xMJktLJ5xLKAVLUA7MLj/MJ7FOPRxMN7JLPzFOTjPiW78','WP3dN0e','WPtdS0ZcNq8','gCkjW7C','a8kCubeYWOa4BSoChSoMW4uxl8oiWRrccmofEclcTv5KWOVdUxjGW5eXr03cGq','WRC7BG','b+ITPoAXMEwMUoI2Ho+/VGVcQSk4r8kkmetcSmk3W5Tmm8kIFG','omkwBGO9','W4XHBweY','ctVcMKe/','WQGMoSkfW7tdI8ow','WP7LKB7LUjhcK8o6WPPhh3pcN3a7WPy','WP/cP15+','WPldUL4opa','W6z/WP9Pna','WOSvpSkAW7W','DexdVr0eW59ZwhNcHW','oCoGW5jlca','gmklWPGsddFdK8k4uCk3WPFcKq','rmo8DCoVW4JcKq','WOJdSLe','oCoft3jdWPPMWPW/WR8zWOxcSmoIWO0m','dMKzW53dLLOR','mu/dKw5A','WPbnWQL8WO0RWQRdPvRcQmkG','W5VcUSoZWRRdNG','WONdLuhcVZm3dG','WOtdT0xdQCkofG','c8olW6tdLmoxWRRcQq','uSohumo5W5e','W77MN7dOJ6RLJPBLIOZML5lMJzZdLUwnToIdPEA2RUwlK+w1KoE5I+E6NUADTq','AmkDW7m3WOC','vqZcJ8ogW40','WRlcVa0SW4y','aKON','CmkjweucWPu','W7FOR7FMSyVPHPBNVOBLJyVML7tPLjZORANVViVORP3OGlJNSz7LVOBLJPpOG4NOVRVOO5VLJAZPPydVVkhdLmoqWRFdR8o+WPjUW4WvW6aIWOGQW4C','WPxcHCo6WRxdHmokWP8','z31lW5i+','Dw9HaCkrcsBdSu3dTmk/W5VdG8oJW5KZW40xcG','oCo5r0Tc','WQJdUeG','ot0DkmovfCky','vh5dW5im','lrBdSa','WOldM0ZdL8kc','5lQF5RsF5yICtW','W5RcPSoACmoE','8jkgMCki','WP7dMvpcTWm','W73cH8kjW4eW','8kkePCkx','WQKSlG','yW7cP8oNW6ldPCoDvmkgW4RcKIbmfwjj','rdRcHtGkWOz1W6tdP0lcJxldTa','wmkWvq','tSoltevR','WOZdQ0hdJCk2','hJ8BdmoD','W5ldNmoI','W67ORABMSBlPHlJNVzpLJkFMLOlPLRFORQZVVAFORONOGixNSOVLV6hLJB7OGi/OVAZOO7NLJi3PPR3VVOhcKSkiWO7dRCopBSofdSk0pZqYltO','WPxcIx5CmW','d0yMka','BCo5W77cN3q','dSoHrw59','WO93FSkYWQq','mCoysW','p8ofW59NmG'],...(function(){return['CSotvuK','WRtORjtMS4ZLPjxOTR/VVB/dGmksrve7WRjQWQHzgazDE04','WO4MESonca','W7DTEq','WOjgWQ5AWPyhWQ7dO1tcL8kKuGnL','WQtcI8ooWQrT','u8k6rSkxwsPpW7SVW5O','nmoMW4BdQmoi','W6xORRtMSiVOTBpMLApVVQdORytMO43MNApNVzJNUR/PHzRORi0','W6FcRSorhay','W5qKe8oYr8kdaSohbf02CNObBeddJSkMWPddN8oTtSonW5e1W6KT','DaVcSSo+W58','uUwrUow6HNNcRZrWAqK1W7hdP8oi','WRZdM1Gwva','WQldTf4ssCkn','W6FcNCkFW40MW5X9AtO','WRtdOLqZAq','WOfaWRXHWPS','W45NWRnJc8o+','WQldSfVdQSkY','n28Q','F8olW4TwC2ddMCkX','gSkozcuO','xCktW5eSWQldJSod','FYJcNsutWPLV5B6S5Awj44cQ5lMa5lIu6lAE5y6a','WOFcRI8PW5ldHvVcNmoI','jSkAhfHcWOjVW7xdUmk7W4G','xeX0W7iS','mLuTd8or','c2edW5/dKG','WQPaWPvjWPq','i1arW57dGG','cM8yW5ddN1C8','bCoDW7xdUSozWQldVmo9W5RcVMxdG8k6W6W','iaNdP8kvvxNdVftcKSosWQqiW6VdLCo/W5iXW6WBW6JcJbafkSoqW5BdTqRcGwVdV1Cs','WQjNfCo8Ea','WP/cGWuoW6K','nmoVxLzn','du08n8oVt8kJnq','x8oYW47cQfC','W4JORAxMSANLPR/OT5/VVBlcIeNOOOdPMBxLIzVVVRlcKt/dGCkrFSkDeqNdU8keWRyGW5G0','W4zrW5ySWRNdQ8o5','yCoOW4Hgrq','wComsbjG','WPDMeSohqq','W4FcOSoPWO7dU8oe','W7DPEMe5kSoT','W5P8WPHYeCo7','W4rkW7i','WRfmF8kvWRS','nHRcULO','WO3dQKldUG','iJdcG2qE','W7xdT8opWPxdKW','E8o5yZnGWRa','wCorW48','W7hcGCkIW4io','FCkOw3eB','WP81zSo/lG','sc3cTmoeW7m','WRFcK2v2ja','yhrXgW','6lwu5y2c5PEY5PwY','sCo6EmoIW6/cLZtcQG','5Pw05zcK5BM55PEu5OYM','WRXMAq','W4FdMSopWR7dPW','5lU85PEP5OYY55QF6k6I5RkL5PAm5Rc4','x3rk','W6SsqKVcOW','tSovB15g','jSo2W6NdTCoT','W5XkW5akWQ4','WQj2WR1XWOm','WOtdVuW','W7v5Fvq0lmoV','yCoSEsD8W6C+W4xcS8oMChFdMuBcQCoUW7ysB8oh','W40QFgxcJW','evmXW6NdLG','WP9rpmoqAG','WRyIjmktWRJdG8obzmoHya0','amoNwwpcIa','W4RcO8o+WOpdVColWRbU','W5CtW64QWPiYWPZdMf7cRq','WOVdGxi','W5bkW5CDWQ/dV8oOW5JdS1WikCkFWRKJemkIW7bx','WOZcHCkXWONdV8kMxJXA','WRVdSMmaBW','j8ohW6tdOSo2','WQFcG8oTWRrf','rZpcG1TuW4KJW6ddKW','WOJOR5lMS5FLPAJOT7PiBmknlG'];}())];}())];}());Iii11l=function(){return lill1I;};return Iii11l();};async function illIiI(){const I11i1i=I1llII,lI1llI={'RJinG':function(Ill1I,i11iiI){return Ill1I===i11iiI;},'mLDzX':I11i1i(0x275,'&&K@'),'XWwHn':function(lIli11,lllI1I){return lIli11<lllI1I;},'qocuj':function(lillI1,IlIlii){return lillI1+IlIlii;},'ehOfF':function(i1l1i1,liil11){return i1l1i1(liil11);},'ueGgI':I11i1i(0x282,'o1PR')},illIil=await iIiIl[I11i1i(0x2ee,'WluB')](li1i1i);if(!illIil&&lI1llI[I11i1i(0x251,'ASWO')](typeof illIil,lI1llI[I11i1i(0x2c1,'[kX6')])){console[I11i1i(0x285,'9bMl')](I11i1i(0x293,'BOiy'));return;}try{$[I11i1i(0x22b,'oA39')]=![];for(let iiillI=0x0;lI1llI[I11i1i(0x20f,'x@9L')](iiillI,authorCodeList[I11i1i(0x263,'PUKo')]);iiillI++){$[I11i1i(0x226,'ASWO')]=authorCodeList[iiillI][I11i1i(0x246,'[@a6')],$[I11i1i(0x2aa,'QwPC')]=authorCodeList[iiillI][I11i1i(0x238,'Udp)')],console['log'](lI1llI['qocuj'](I11i1i(0x2bc,'ZrNW')+lI1llI[I11i1i(0x1eb,'BOiy')](iiillI,0x1)+I11i1i(0x23f,'QwPC'),$[I11i1i(0x200,'uU7K')])),console['log'](''),await lI1llI[I11i1i(0x28d,'dK7n')](Ill1l,lI1llI['ueGgI']),await $['wait'](0x1f4);}}catch(l1l111){console[I11i1i(0x29f,'nCX&')](l1l111['message']);}}async function lI1lli(l1iIII,llI1I1){const l1l1iI=I1llII,IlIlil={'PgJLM':function(lIli1I,II1il){return lIli1I(II1il);},'oWYua':l1l1iI(0x234,'3%iV'),'YmRXq':function(lllI11,I1lIll){return lllI11==I1lIll;},'hgUda':function(I1lIli,II1ii){return I1lIli===II1ii;},'LgKqQ':l1l1iI(0x27a,'ASWO'),'NMpQh':function(IIIIII,lillII){return IIIIII!==lillII;},'kYXNU':l1l1iI(0x228,'Cq&c'),'ySFUl':'zIpxv','XkQhD':l1l1iI(0x23e,'m@Id')};try{switch(l1iIII){case IlIlil[l1l1iI(0x270,'B)R%')]:if(IlIlil[l1l1iI(0x2d6,'[kX6')](llI1I1['subCode'],0x0))IlIlil[l1l1iI(0x1f2,'liD&')](IlIlil['LgKqQ'],IlIlil[l1l1iI(0x2b8,'N2vI')])?console[l1l1iI(0x2be,'o1PR')](JSON[l1l1iI(0x26e,'t1Vf')](data[l1l1iI(0x2cf,'ADr@')])):(I1l1II[l1l1iI(0x28c,'5CDY')](IIli1I),I1i11I&&(IIliI[l1l1iI(0x22d,'E(0l')]=!![],ilI1ll[l1l1iI(0x2c8,'pykg')]&&Iillil['message'][l1l1iI(0x233,'ms!4')](l1lIli)));else{if(llI1I1[l1l1iI(0x27e,'QwPC')]==0x1f)IlIlil[l1l1iI(0x2b6,'m@Id')]('ElTtD',IlIlil[l1l1iI(0x279,'t1Vf')])?console[l1l1iI(0x299,'B)R%')](llI1I1[l1l1iI(0x214,'x@9L')]):(l1llI1['logErr'](llIIll,IillIi),lii=null);else llI1I1['subCode']==0x57b?IlIlil[l1l1iI(0x2a3,'&&K@')]!==IlIlil['ySFUl']?IlIlil['PgJLM'](I1ilIi,{'err':IiiiI,'res':llIlli,'data':llIlll}):console[l1l1iI(0x1e2,'WluB')](llI1I1[l1l1iI(0x225,'m@Id')]):console[l1l1iI(0x1fa,'ASWO')](llI1I1[l1l1iI(0x253,'ASWO')]);}break;}}catch(liil1I){IlIlil[l1l1iI(0x290,'[@a6')](IlIlil[l1l1iI(0x230,'K[c2')],l1l1iI(0x2d1,'BOiy'))?II11Ii[l1l1iI(0x2b2,'&&K@')](II11Il[l1l1iI(0x21b,'qGT#')]):console[l1l1iI(0x1fd,'3%iV')](l1l1iI(0x1e1,'tZ6b')+l1iIII+'\x20请求响应\x20'+(liil1I['message']||liil1I));}}async function Ill1l(IlIliI){const I1llI1=I1llII,l1iII1={'EiQEW':I1llI1(0x1ef,'PUKo'),'KPfbx':function(lillIi,illIi1){return lillIi||illIi1;},'MukNB':'\x0a---------------------------------------------------\x0a','PWoSD':I1llI1(0x1e9,'imoV'),'xInLz':'\x0a未获取到数据,可能活动已经结束','yiJnr':function(ii1ili,liil1i){return ii1ili(liil1i);},'Etnnf':I1llI1(0x284,'N2vI'),'HXGqr':I1llI1(0x215,'tZ6b'),'uRayF':'keep-alive','FUVmq':I1llI1(0x277,'ADr@'),'BHygV':I1llI1(0x2e5,'pykg'),'mhXLT':'empty','VhmjH':I1llI1(0x2e9,'Udp)'),'siQcM':function(lI1lil,i1l1iI){return lI1lil<i1l1iI;},'OgjTr':I1llI1(0x1ee,'ADr@'),'rRKYH':function(liil1l,lI1lii,Iiili1){return liil1l(lI1lii,Iiili1);},'nIyRn':function(Iil1l1,i1i11I){return Iil1l1!==i1i11I;},'EBNmh':'VBDvX','ImSBL':I1llI1(0x231,'[@a6'),'PaJrP':function(il1iIl,iii1ii){return il1iIl===iii1ii;},'yMMBw':I1llI1(0x2db,'9Yin'),'NVwli':'Timeout\x20awaiting\x20\x27request\x27','iNwUj':function(il1iIi,iii1il){return il1iIi===iii1il;},'VvrTK':I1llI1(0x29b,'1UH@'),'kjGDJ':I1llI1(0x28f,'s5wM'),'IuDHP':I1llI1(0x2ed,'ADr@'),'OcOPm':'IzbBk','aZsSY':I1llI1(0x2da,'5CDY'),'ucSuR':I1llI1(0x281,'cqi#'),'XwwiL':function(II11li,I1l11i){return II11li!==I1l11i;},'GUghz':I1llI1(0x237,'B)R%'),'xbDXs':I1llI1(0x21f,'N2vI'),'NETTD':I1llI1(0x2b7,'yRnR'),'RnVgj':'ixlkd','yceQf':function(iIIiiI,liiI1i){return iIIiiI===liiI1i;},'BsSDT':I1llI1(0x24b,'&U41'),'eRkKx':function(ililIi,lilIIl){return ililIi>=lilIIl;},'JbpdH':I1llI1(0x207,'qGT#'),'lLjQJ':I1llI1(0x2c6,'QwPC'),'oAUPT':function(ililIl,liiI1l){return ililIl===liiI1l;},'KDJEF':I1llI1(0x289,'B8*l')};if($[I1llI1(0x2d7,'3%iV')]||$['outFlag'])return;let iiill1='',lIli1i='',IIIII1='GET';switch(IlIliI){case l1iII1[I1llI1(0x2c7,'BOiy')]:lIli1i={'completionFlag':!![],'sourceCode':I1llI1(0x276,'E(0l'),'encryptProjectId':$['encryptProjectId'],'encryptAssignmentId':$['encryptAssignmentId']},iiill1=I1llI1(0x1e5,'0JnT')+encodeURIComponent(JSON[I1llI1(0x264,'dK7n')](lIli1i));break;default:console['log'](I1llI1(0x2e2,'DN]2')+IlIliI);return;}const I1lIlI={'url':iiill1,'headers':{'Accept':l1iII1['HXGqr'],'Accept-Encoding':'gzip,\x20deflate,\x20br','Accept-Language':I1llI1(0x2b1,'[@a6'),'Connection':l1iII1[I1llI1(0x2ec,'nCX&')],'Content-Type':l1iII1[I1llI1(0x291,'yRnR')],'Cookie':li1i1i,'Origin':l1iII1[I1llI1(0x29c,'E(0l')],'Referer':I1llI1(0x2a1,'ZrNW'),'x-rp-client':I1llI1(0x1df,'DqgI'),'Sec-Fetch-Dest':l1iII1[I1llI1(0x2a2,'HTht')],'Sec-Fetch-Mode':l1iII1['VhmjH'],'Sec-Fetch-Site':I1llI1(0x2a5,'qGT#'),'User-Agent':$['UA']},'timeout':0x7530},ii1ill=0x1;let II1iI=0x0,llI1II=null,lIli1l=![];while(l1iII1[I1llI1(0x2ae,'9@g*')](II1iI,ii1ill)){II1iI>0x0&&(l1iII1['OgjTr']===I1llI1(0x265,'PUKo')?await $[I1llI1(0x1e6,'m@Id')](0x3e8):(lilIl1['msg'](i1l1ii['name'],l1iII1['EiQEW']),i1l1[I1llI1(0x2e3,'&&K@')](0x1)));const {err:i1l1II,res:i1ill,data:I1l11l}=await l1iII1[I1llI1(0x2d0,'9bMl')](llI1Il,I1lIlI,IIIII1);if(i1l1II){if(l1iII1[I1llI1(0x1ea,'B)R%')](l1iII1[I1llI1(0x2c0,'o1PR')],l1iII1[I1llI1(0x1f1,'yRnR')])){if(l1iII1[I1llI1(0x2b5,'liD&')](typeof i1l1II,l1iII1['yMMBw'])&&i1l1II[I1llI1(0x2a7,'o1PR')](l1iII1[I1llI1(0x220,'qGT#')]))l1iII1[I1llI1(0x20b,'WluB')](l1iII1[I1llI1(0x271,'ms!4')],l1iII1[I1llI1(0x1fb,'HTht')])?llI1II=IlIliI+I1llI1(0x25d,'qGT#'):IiilII['log'](IliI1I['msg']);else{const llIli=i1ill?.[I1llI1(0x2d9,'ADr@')];if(llIli){if(l1iII1[I1llI1(0x213,'oA39')](l1iII1['kjGDJ'],l1iII1[I1llI1(0x2b3,'HTht')])){const i1i11i=I1llI1(0x26f,'3%iV')['split']('|');let II11l1=0x0;while(!![]){switch(i1i11i[II11l1++]){case'0':lIIil1[I1llI1(0x24c,'imoV')](I1llI1(0x244,'Cq&c')+IIli1+'\x20响应Body\x20=>\x20'+l1iII1[I1llI1(0x254,'uU7K')](II1liI,'无')+'\x0a');continue;case'1':Illl1i['log']('\x0a---------------------------------------------------\x0a');continue;case'2':IiiIl1[I1llI1(0x2e0,'X1FT')](l1iII1[I1llI1(0x1f6,'9Yin')]);continue;case'3':IlI1i1['log']('🔧\x20'+l1lIl1+I1llI1(0x21c,'imoV')+l1iII1[I1llI1(0x29a,'HTht')](IiiIlI,'无')+'\x0a');continue;case'4':Iilli1[I1llI1(0x248,'V6bJ')](I1llI1(0x241,'5CDY')+I1l1Il+'\x20请求参数');continue;case'5':llIll1[I1llI1(0x299,'B)R%')](Illl1l);continue;}break;}}else{if([0x193,0x1ed][I1llI1(0x2ce,'ZrNW')](llIli))l1iII1['nIyRn'](l1iII1[I1llI1(0x2d8,'V6bJ')],I1llI1(0x205,'5CDY'))?(llI1II=IlIliI+I1llI1(0x1f0,'tZ6b')+llIli+'）',lIli1l=!![]):l1il1I?l1llII=IilIll['parse'](lI11Ii)||'':Iiill[I1llI1(0x23d,'ADr@')](I1llI1(0x2c4,'OF(t'));else{if([0x190,0x194][I1llI1(0x2c2,'1UH@')](llIli)){if(l1iII1[I1llI1(0x273,'0JnT')]==='IzbBk')llI1II=IlIliI+I1llI1(0x2d5,'[kX6')+llIli+'）';else{const iii1iI=l1iII1[I1llI1(0x2b9,'dK7n')];return{'err':iii1iI,'res':null,'data':null};}}else l1iII1[I1llI1(0x28e,'3%iV')](l1iII1['aZsSY'],l1iII1[I1llI1(0x2ac,'PUKo')])?lIII11['log'](l1iII1['xInLz']):llI1II=IlIliI+I1llI1(0x217,'2QHh')+llIli+'）';}}}else llI1II=IlIliI+I1llI1(0x2b0,'9bMl')+(i1l1II[I1llI1(0x201,'liD&')]||i1l1II);}II1iI++;}else iIIl1I=I1iIli+I1llI1(0x2d4,'o1PR')+(lI1Ill[I1llI1(0x283,'X1FT')]||lI1Ili);}else{if(l1iII1[I1llI1(0x249,'1UH@')](l1iII1[I1llI1(0x29e,'0JnT')],l1iII1['GUghz'])){if([0x193,0x1ed][I1llI1(0x27b,'ms!4')](i1ilil))iliIIl=Ii1iIl+I1llI1(0x1f7,'B)R%')+iliIIi+'）',ill11I=!![];else[0x190,0x194][I1llI1(0x2cd,'OF(t')](iliIII)?Iliiil=li1Il+I1llI1(0x235,'DN]2')+li1Ii+'）':Iliiii=i1illI+I1llI1(0x256,'OF(t')+i1IIl+'）';}else{const IlllIl=iIiIl['getResponseCookie'](i1ill),II11lI=![];if(II11lI){if(l1iII1[I1llI1(0x2dc,'2QHh')](l1iII1[I1llI1(0x26b,'tZ6b')],I1llI1(0x278,'cqi#')))l1iII1[I1llI1(0x297,'imoV')](lil,IllI1l);else{const I1l11I=l1iII1[I1llI1(0x240,'OF(t')][I1llI1(0x20c,'&&K@')]('|');let Ilil1l=0x0;while(!![]){switch(I1l11I[Ilil1l++]){case'0':console[I1llI1(0x2e8,'&U41')]('🔧\x20'+IlIliI+I1llI1(0x261,'BOiy')+l1iII1[I1llI1(0x274,'&&K@')](IlllIl,'无')+'\x0a');continue;case'1':console[I1llI1(0x1dd,'1UH@')]('🔧\x20'+IlIliI+'\x20请求参数');continue;case'2':console[I1llI1(0x2b4,'E(0l')](l1iII1[I1llI1(0x222,'uU7K')]);continue;case'3':console['log'](I1llI1(0x208,'[kX6')+IlIliI+'\x20响应Body\x20=>\x20'+l1iII1[I1llI1(0x27f,'9Yin')](I1l11l,'无')+'\x0a');continue;case'4':console[I1llI1(0x285,'9bMl')](l1iII1[I1llI1(0x20a,'t1Vf')]);continue;case'5':console[I1llI1(0x245,'qGT#')](I1lIlI);continue;}break;}}}try{if('ixlkd'!==l1iII1['RnVgj'])ll1l1[I1llI1(0x23b,'&U41')]['fix'](IllIIi);else{let iilll=JSON[I1llI1(0x25e,'gqfq')](I1l11l);l1iII1[I1llI1(0x2a6,'BOiy')](lI1lli,IlIliI,iilll);break;}}catch(il1iI1){l1iII1['yceQf'](l1iII1['BsSDT'],'tqdwS')?(lIIii1[I1llI1(0x2a0,'X1FT')]=!![],ll1i1[I1llI1(0x2dd,'E(0l')]&&lliil1['message'][I1llI1(0x23a,'PUKo')](IIllI)):(llI1II='❌\x20'+IlIliI+I1llI1(0x1f9,'BOiy')+il1iI1['message'],console[I1llI1(0x269,'[kX6')](I1llI1(0x1f5,'qGT#')+IlIliI+'\x20=>\x20'+l1iII1[I1llI1(0x1ec,'&U41')](String,I1l11l||I1llI1(0x209,'V6bJ'))),II1iI++);}lIli1l=![];}}}if(l1iII1[I1llI1(0x239,'ASWO')](II1iI,ii1ill)){if(l1iII1[I1llI1(0x252,'DN]2')](l1iII1[I1llI1(0x268,'nCX&')],l1iII1['lLjQJ']))console['log'](llI1II),lIli1l&&(l1iII1['oAUPT'](l1iII1['KDJEF'],l1iII1[I1llI1(0x28a,'imoV')])?($['outFlag']=!![],$['message']&&$['message'][I1llI1(0x2df,'&&K@')](llI1II)):IllII1[I1llI1(0x216,'s5wM')]('❌\x20未能正确处理\x20'+I1iIil+'\x20请求响应\x20'+(lI1Iil[I1llI1(0x26c,'K[c2')]||lilIiI)));else{const I1iIIi={'xwnUV':function(I1iIIl,lI1IIl){return l1iII1['yiJnr'](I1iIIl,lI1IIl);}};return new ii1ll(async i1ilI=>{lliiii['post'](IliI1i,(iii1lI,i1ilI1,Iiilii)=>{const I11i1l=iii1II;I1iIIi[I11i1l(0x22a,'o1PR')](i1ilI,{'err':iii1lI,'res':i1ilI1,'data':Iiilii});});});}}}async function llI1Il(Iil1li,Iiilil=I1llII(0x1f3,'B8*l')){const il1il=I1llII,Iil1ll={'rkvkD':function(iillI,lI1III){return iillI(lI1III);},'mXALr':function(IIliIi,IllIiI){return IIliIi===IllIiI;},'ZEugf':il1il(0x20d,'dK7n'),'jLfCm':function(i1il1,I1l111){return i1il1(I1l111);},'fLvNS':function(IIii1l,I1iIII){return IIii1l||I1iIII;},'DNCKb':il1il(0x295,'dK7n'),'aDBWn':function(liiI11,ililI1){return liiI11!==ililI1;},'majub':il1il(0x20e,'ms!4'),'eZZVD':function(IIii1i,i1ili){return IIii1i!==i1ili;},'bENqt':il1il(0x1e8,'pykg'),'PXVzs':'QNLhs','rJhci':il1il(0x298,'yRnR')};if(Iiilil==='POST'){if(Iil1ll[il1il(0x2c9,'HTht')](il1il(0x24a,'m@Id'),'ijwkL'))Iliili=Iliill+il1il(0x24d,'PUKo')+IIII11+'）';else return new Promise(async I1iII1=>{const iIIili=il1il,lilII1={'ZzNwf':function(iill1,iii1l1){const Il1i1i=iii1II;return Iil1ll[Il1i1i(0x260,'[@a6')](iill1,iii1l1);}};$[iIIili(0x287,'B8*l')](Iil1li,(IIliIl,II11ll,liiI1I)=>{const Ii1iiI=iIIili;lilII1[Ii1iiI(0x218,'tZ6b')](I1iII1,{'err':IIliIl,'res':II11ll,'data':liiI1I});});});}else{if(Iiilil===Iil1ll[il1il(0x2e4,'OF(t')]){if(Iil1ll[il1il(0x2a4,'cqi#')]('EuCyg',Iil1ll['bENqt'])){IiilI1['log']('\x0a当期活动已经结束,请等待下次活动\x0a');return;}else return new Promise(async lI1II1=>{const Ilil1I=il1il,i1ilII={'TgKpD':function(iIIii1,IllIi1){return Iil1ll['rkvkD'](iIIii1,IllIi1);}};Iil1ll[Ilil1I(0x2ba,'X1FT')]('wDdhQ',Iil1ll[Ilil1I(0x206,'DqgI')])?IiilIl=iii1Ii+'\x20请求超时，请检查网络重试':$[Ilil1I(0x212,'oA39')](Iil1li,(Ii1ilI,II11i1,iliIil)=>{i1ilII['TgKpD'](lI1II1,{'err':Ii1ilI,'res':II11i1,'data':iliIil});});});}else{if(Iil1ll[il1il(0x2e1,'B8*l')](Iil1ll[il1il(0x25c,'E(0l')],il1il(0x257,'s5wM'))){const iliIii=Iil1ll[il1il(0x262,'PUKo')];return{'err':iliIii,'res':null,'data':null};}else I1i11l='❌\x20'+llIlii+il1il(0x211,'m@Id')+llIlil[il1il(0x1fe,'9Yin')],IIlil[il1il(0x216,'s5wM')]('🚫\x20'+ilI1lI+'\x20=>\x20'+Iil1ll[il1il(0x27c,'5CDY')](IiiIll,Iil1ll[il1il(0x286,'DN]2')](IIlii,Iil1ll['DNCKb']))),IlI1il++;}}}function ii1iii(il1li,iIIill){const iliIiI=I1llII,iilii={'JGIKP':function(Ill11i,iilil){return Ill11i+iilil;},'HlCqe':function(Ill11l,il1ll){return Ill11l*il1ll;},'ONSoP':function(i1ilIi,lill1l){return i1ilIi-lill1l;}};return iilii['JGIKP'](Math[iliIiI(0x1e0,'qGT#')](iilii['HlCqe'](Math[iliIiI(0x28b,'ZrNW')](),iilii[iliIiI(0x21a,'B8*l')](iIIill,il1li))),il1li);}function i11iil(l1l1i1){const II11iI=I1llII,i1iiI={'FfPlz':function(i1ilIl,llI11I){return i1ilIl===llI11I;},'OdqPg':II11iI(0x2eb,'pykg'),'aEboG':II11iI(0x266,'0JnT'),'dOMGf':II11iI(0x22f,'t1Vf'),'Jtshm':II11iI(0x21e,'pykg'),'vqCKr':function(Il1i11,iii1li){return Il1i11(iii1li);},'HozDG':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'};return new Promise(Iil1i1=>{const Il1i1l=II11iI,IIii11={'url':''+l1l1i1,'timeout':0x2710,'headers':{'User-Agent':i1iiI[Il1i1l(0x1e4,'pykg')]}};$['get'](IIii11,async(iliIl1,Ii1il1,iii1ll)=>{const Iil1ii=Il1i1l;try{if(i1iiI[Iil1ii(0x232,'t1Vf')](Iil1ii(0x1de,'dK7n'),i1iiI[Iil1ii(0x2e6,'0JnT')])){if(iliIl1){}else{if(iii1ll){if(i1iiI['aEboG']===Iil1ii(0x242,'oA39'))iii1ll=JSON[Iil1ii(0x25a,'9@g*')](iii1ll)||'';else{i1ili1[Iil1ii(0x245,'qGT#')](Iil1ii(0x1f4,'gqfq'));return;}}else console[Iil1ii(0x285,'9bMl')](i1iiI[Iil1ii(0x24e,'yRnR')]);}}else li1II[Iil1ii(0x2a9,'pykg')](IliI11[Iil1ii(0x2ea,'dK7n')]);}catch(IliIIl){$['logErr'](IliIIl,Ii1il1),iii1ll=null;}finally{i1iiI['Jtshm']===Iil1ii(0x22e,'2QHh')?i1iiI[Iil1ii(0x202,'s5wM')](Iil1i1,iii1ll):lilii['post'](l1iiI,(lI1l1l,IIliII,iiliI)=>{Illl1I({'err':lI1l1l,'res':IIliII,'data':iiliI});});}});});}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
